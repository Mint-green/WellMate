# MySQL优化配置 (低内存环境)
[mysqld]

# 基础配置
port=3306
socket=/var/run/mysqld/mysqld.sock

# 内存优化配置 (针对极低内存环境)
innodb_buffer_pool_size=64M
key_buffer_size=16M
max_connections=20
thread_cache_size=4

# MySQL 8.0已移除查询缓存，移除相关配置

# 性能优化
innodb_log_file_size=48M
innodb_log_buffer_size=16M
max_allowed_packet=16M
sort_buffer_size=256K
read_buffer_size=128K
read_rnd_buffer_size=256K
join_buffer_size=128K

# 连接优化
wait_timeout=600
interactive_timeout=600

# 日志配置
slow_query_log=1
slow_query_log_file=/var/log/mysql/slow.log
long_query_time=2

# 其他优化
skip-name-resolve
innodb_flush_log_at_trx_commit=2
sync_binlog=0

[mysql]
default-character-set=utf8mb4

[client]
default-character-set=utf8mb4